# Chapter 02 - 객체의 종류

## VO (Value Object: 값 객체)
- **[정의]** 객체이면서 동시에 값인 것
- **[목적]** 신뢰할 수 있고 예측 가능한 객체를 만드는 것
- **[특징]**
  - 식별자를 넣으면 안됨
    - 식별자를 넣는 순간 동등성이 성립하지 않기 때문
- **[방법]**
  - @Value 애너테이션 사용 (롬복)
    - equals, hashcode 메서드가 객체의 상태에 따라 비교하는 메서드로 자동 생성
    - 멤버 변수가 final로 선언
    - 클래스가 final로 선언

### 소프트웨어 설계자 입장에서 값은 무엇인가? (값의 특성)
#### 불변성
- **[정의]** 값은 변하지 않음
- **[예시]** 1이라는 숫자는 시간이 지나도 값이 변하지 않음
- **[장점]** 
  - 소프트웨어의 복잡도를 낮출 수 있음
  - 객체를 예측 가능하고 신뢰 가능하게 만듦
- **[방법]** 자바에서는 값을 변하지 않게 하기 위해 final 예약어를 사용
- **[질문]** 모든 필드가 final이면 불변인가? (X)
  - 필드에 래퍼런스 변수가 있으면 불변성이 보장되지 않음
  - 상속 받은 클래스의 맴버 변수가 불변이 아닐 수 있음
  - VO안 모든 함수가 입력값이 같을때 항상 동일한 값을 반환하는 순수 함수여야함
  
- **[사용 예시]**
  - 다수의 스레드가 같은 객체를 두고 협업할 때 객체에서 값의 변경을 지원하면 예상치 못한 결과를 가져올 수 있음
  - 변경 요청이 들어올 때 새로운 VO 객체를 반환해서 해결
  
#### 동등성
- **[정의]** 값은 내재된 의미가 같다면 같음
- **[예시]** R, G, B를 필드로 가지는 Color 클래스가 있을때, 두 Color 객체가 같은 R, G, B 값을 가지면 동등함
- **[방법]** 
  - equals, hashCode 오버라이딩
  - @Value 애너테이션 사용
#### 자가검증
- **[정의]** 클래스 스스로 상태가 유효한지 검증할 수 있음
- **[장점]** 한번 생성된 VO의 멤버 변수에는 이상한 값이 들어있을 수 없음
- **[방법]** VO의 생성자에 유효한 값이 들어오는지 검증하는 코드가 들어있어야함

## DTO (Data Transfer Object: 데이터 전송 객체)
- **[정의]** 데이터를 전달할 목적으로 만들어진 객체
- **[특징]**
  - 능동적인 역할이나 책임을 가지고 있으면 안됨
  - 데이터를 읽고 쓰는 것 이외의 비즈니스 로직이 들어있으면 안됨
- **[방법]** 
  - 클래스에 필드를 선언한 후 읽고 쓰기 위한 기능 추가
  - @Data 애너테이션 사용
    - @Getter, @Setter, @ToString, @EqualsAndHashCode 한번에 지정됨
    - 자연스러운 객체지향 코드를 만드는데 방해될 수 있음
- **[오해]**
  - DTO는 프로세스, 계층 간 데이터 이동에 사용됨 -> 불충분
    - 더 단순하고 범용적인 개념
    - 데이터 전달이 목적
  - DTO는 Getter, Setter를 갖고 있음 -> 필수조건 아님 
    - 데이터를 전달하는 본연의 목적을 다하면 DTO임
    - 모든 멤버 변수를 private으로 선언하되 필요한 일부만 게터를 제공하는 것이 바람직함
  - DTO는 데이터베이스에 데이터를 저장하는데 사용되는 객체임 -> 틀린 정의
    - 데이터를 전송하기 위한 객체임
    - 데이터베이스에 국한되는 개념이 아님

## DAO(Data Access Object: 데이터 접근 객체)
- **[정의]** 데이터베이스 접근과 관련된 역할을 지닌 객체
- **[역할]**
  - 데이터베이스와의 연결 관리
  - 데이터베이스에 연결해 데이터에 대한 CRUD 연산 수행
  - 보안 취약성을 고려한 쿼리 작성
- **[목적]** 도메인 로직과 데이터베이스 연결 로직을 분리하기 위함
  - 애플리케이션의 핵심은 요구사항을 해결하는 비즈니스 로직과 도메인임
  - 데이터베이스 연결 로직이 도메인 로직과 섞여있다면 핵심을 파악하기 쉽지 않음

## 엔티티(Entity: 개체)
- **[정의]** 데이터로 표현하려는 유무형의 대상
- **[종류]**
  - 도메인 엔티티
    - **[도메인]** 비즈니스 영역
    - **[도메인 모델]** 어떤 도메인 문제를 해결하고자 만들어진 클래스 모델
    - **[도메인 엔티티]** 도메인 모델 중 식별 가능한 식별자와 비즈니스 로직을 가지는 모델
    
  - DB 엔티티
    - **[정의]** 데이터베이스 분야에서 데이터를 표현하려는 대상
  - JPA 엔티티
    - 관계형 데이터베이스의 엔티티를 지칭
    - JPA의 @Entity 애너테이션이 적용된 객체는 영속성 객체(PO: Persistent object)임
    - JPA의 @Entity 애너테이션은 영속성 객체를 만들기 위한 도구
- **[주의]**
  - 소프트웨어 개발 분야에서 말하는 엔티티는 도메인 엔티티
  - 도메인 엔티티와 DB 엔티티는 다름

## 객체의 다양한 종류
- **[핵심]** 각 개념이 만들어진 이유와 목적을 생각하는 것이 바람직함
- **[가치]**
  - 불변성
  - 예측 가능성
  - 역할의 분리
  - 항상성